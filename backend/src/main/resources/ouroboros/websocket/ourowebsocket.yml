asyncapi: 3.0.0
info:
  title: WebSocket API Documentation
  version: 1.0.0
defaultContentType: application/json
servers:
  ws-ws:
    host: localhost:8080
    pathname: /ws
    protocol: ws
    description: WS WebSocket server at /ws
channels:
  _chat.send:
    address: /chat.send
    messages:
      UserChatMessage:
        $ref: '#/components/messages/UserChatMessage'
    bindings:
      stomp: {
      }
    x-ouroboros-id: df8f96ca-89b4-4dfb-8f7e-f7fb623e7410
    x-ouroboros-progress: mock
    x-ouroboros-tag: none
    x-ouroboros-diff: none
    x-ouroboros-isvalid: true
  _topic_chat:
    address: /topic/chat
    messages:
      UserChatMessage:
        $ref: '#/components/messages/UserChatMessage'
    bindings:
      stomp: {
      }
    x-ouroboros-id: 3652fc00-8f7e-4374-b906-0415abd61a3f
    x-ouroboros-progress: mock
    x-ouroboros-tag: none
    x-ouroboros-diff: none
    x-ouroboros-isvalid: true
operations:
  _chat.send_to__topic_chat:
    action: receive
    channel:
      $ref: '#/channels/_chat.send'
    messages:
      - $ref: '#/channels/_chat.send/messages/UserChatMessage'
    reply:
      channel:
        $ref: '#/channels/_topic_chat'
      messages:
        - $ref: '#/channels/_topic_chat/messages/UserChatMessage'
    x-ouroboros-id: 9848b6c7-8e6a-4676-b4a2-4199725eb2f8
    x-ouroboros-entrypoint: /ws
    bindings:
      stomp: {
      }
    x-ouroboros-diff: none
    x-ouroboros-progress: none
    x-ouroboros-tag: none
components:
  messages:
    UserChatMessage:
      name: User Chat Message
      contentType: application/json
      description: A message sent by a user in the chat
      payload:
        $ref: '#/components/schemas/ChatMessage'
  schemas:
    ChatMessage:
      type: object
      title: Chat Message
      description: Represents a chat message from a user
      properties:
        messageId:
          type: string
        userId:
          type: string
        content:
          type: string
        timestamp:
          type: string
        attachments:
          $ref: '#/components/schemas/MessageArray'
      required:
        - messageId
        - userId
        - content
        - timestamp
      x-ouroboros-orders:
        - messageId
        - userId
        - content
        - timestamp
        - attachments
    MessageArray:
      type: array
      title: Array of Messages
      description: Array containing multiple message objects
      items:
        type: object
        properties:
          id:
            type: string
          content:
            type: string
        required:
          - id
          - content

